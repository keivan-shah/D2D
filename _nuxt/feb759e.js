(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{306:function(n,e,o){"use strict";o.r(e);o(37);function t(n,e,o){var t=(new Date).toLocaleString();n.messages.unshift({time:t,message:(o?"SELF: ":"PEER: ")+e,_rowVariant:o?"danger":"primary"})}function c(n){n.peer&&n.peer.destroy(),n.peer=null,n.lastPeerId=null,n.conn=null,n.messages=[],n.receiverId="",n.sendMsg=""}function r(n){c(n);var e=new Peer(null,{debug:2});e.on("open",(function(o){null===e.id?(console.log("Received null id from peer open"),e.id=n.lastPeerId):n.lastPeerId=e.id,console.log("ID: "+e.id)})),e.on("connection",(function(e){n.conn&&n.conn.open?e.on("open",(function(){e.send("Already connected to another client"),setTimeout((function(){e.close()}),500)})):(console.log("Connected to: "+e.peer),n.conn=e,handleMessages(n))})),e.on("disconnected",(function(){console.log("Connection lost. Please reconnect")})),e.on("close",(function(){console.log("Connection destroyed"),c(n)})),e.on("error",(function(e){console.log(e),alert(""+e),c(n)})),n.peer=e}var l={transition:"page-slide",asyncData:function(){return{peer:null,lastPeerId:null,conn:null,messages:[],receiverId:"",sendMsg:""}},methods:{create:function(n){n&&r(this)},connect:function(n){var e;n&&((e=this).conn&&e.conn.close(),e.peer||r(e),e.conn=e.peer.connect(e.receiverId,{reliable:!0}),e.conn.on("open",(function(){console.log("Connected to: "+e.conn.peer)})),e.conn.on("data",(function(data){t(e,data,!1)})),e.conn.on("close",(function(){console.log("Peer Connection destroyed")})))},send:function(n){var e;n&&((e=this).conn&&e.conn.open?(e.conn.send(e.sendMsg),console.log(e.sendMsg+" msg sent"),t(e,e.sendMsg,!0),e.sendMsg=""):(console.log("Peer Connection is closed"),c(e)))}},mounted:function(){r(this)}},d=o(64),component=Object(d.a)(l,(function(){var n=this,e=n._self._c;return e("div",[e("b-row",{staticClass:"justify-content-center mt-2"},[e("h1",[n._v("Client")])]),n._v(" "),e("b-row",{staticClass:"justify-content-center mt-2"},[null===n.peer?e("h2",[n._v("Not yet connected! ðŸ˜¢")]):e("h2",[n._v(n._s(n.peer.id))]),n._v(" "),e("b-button",{staticClass:"ml-2",attrs:{pill:"",variant:"outline-dark"},on:{click:n.create}},[e("b-icon",{attrs:{icon:"arrow-clockwise"}})],1)],1),n._v(" "),e("b-row",{staticClass:"justify-content-center mt-2"},[e("b-form",{attrs:{inline:""}},[e("b-form-input",{staticClass:"mr-2",attrs:{placeholder:"Receiver ID"},model:{value:n.receiverId,callback:function(e){n.receiverId=e},expression:"receiverId"}}),n._v(" "),e("b-button",{attrs:{variant:"primary"},on:{click:n.connect}},[n._v("Connect")])],1)],1),n._v(" "),null!==n.conn?[e("b-row",{staticClass:"justify-content-center mt-2"},[e("h3",[n._v("Connected to "+n._s(n.conn.peer))])]),n._v(" "),e("b-row",{staticClass:"justify-content-center mt-2"},[e("b-form",{attrs:{inline:""}},[e("b-form-input",{staticClass:"mr-2",attrs:{placeholder:"Send Message"},model:{value:n.sendMsg,callback:function(e){n.sendMsg=e},expression:"sendMsg"}}),n._v(" "),e("b-button",{attrs:{variant:"primary"},on:{click:n.send}},[e("b-icon",{attrs:{icon:"forward-fill"}})],1)],1)],1)]:n._e(),n._v(" "),e("b-row",{staticClass:"justify-content-center mt-4"},[e("b-table",{attrs:{"sticky-header":"",striped:"",outlined:"",hover:"",items:n.messages}})],1)],2)}),[],!1,null,null,null);e.default=component.exports}}]);